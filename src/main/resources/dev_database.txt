-- -----------------------------------------------------
-- Schema dev_database
-- -----------------------------------------------------
CREATE database `dev_database`;

USE `dev_database`;

-- -----------------------------------------------------
-- Table `dev_database`.`client`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dev_database`.`client`;
CREATE TABLE IF NOT EXISTS `dev_database`.`client`(
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `document_type` VARCHAR(20) NOT NULL,
  `document_number` VARCHAR(20) UNIQUE NOT NULL,
  `ibs_code` VARCHAR(12) UNIQUE NULL DEFAULT NULL,
  `type` CHAR(2) NULL DEFAULT NULL,
  `name` VARCHAR(60) NOT NULL,
  `father_last_name` VARCHAR(60) DEFAULT NULL,
  `mother_last_name` VARCHAR(60) DEFAULT NULL,
  `gender` CHAR(1) NULL,
  `birth_date` DATETIME NULL DEFAULT NULL,
  `marital_status_code` VARCHAR(10) NULL DEFAULT NULL,
  `marital_status` VARCHAR(30) NULL DEFAULT NULL,
  `job_type_code` VARCHAR(10) NULL DEFAULT NULL,
  `job_type` VARCHAR(30) NULL DEFAULT NULL,
  `income_category_code` varchar(10)  NULL,
  `income_category` VARCHAR(20)  NULL,
  `education_level_code` VARCHAR(10) NULL DEFAULT NULL,
  `education_level` VARCHAR(30) NULL DEFAULT NULL,
  `father_first_name` VARCHAR(60) DEFAULT NULL,
  `mother_first_name` VARCHAR(60) DEFAULT NULL,
  `status` CHAR(1) NULL DEFAULT NULL,
  `username_create` VARCHAR(30) NULL,
  `date_create` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `date_update` DATETIME ON UPDATE CURRENT_TIMESTAMP,
  `username_update` VARCHAR(30) NULL,
  PRIMARY KEY (`id`));

-- -----------------------------------------------------
-- Table `dev_ebpm_flow`.`address`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dev_ebpm_flow`.`address`;
CREATE TABLE IF NOT EXISTS `dev_ebpm_flow`.`address` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `person_id` INT NOT NULL,
  `type` VARCHAR(30) NULL DEFAULT NULL,
  `street_type` VARCHAR(20) NULL DEFAULT NULL,
  `street_name` VARCHAR(45) NULL DEFAULT NULL,
  `lot` VARCHAR(10) NULL DEFAULT NULL,
  `block` VARCHAR(10) NULL DEFAULT NULL,
  `neighborhood` VARCHAR(30) NULL DEFAULT NULL,
  `aparment` VARCHAR(30) NULL DEFAULT NULL,
  `landmark` VARCHAR(45) NULL DEFAULT NULL,
  `department_code` varchar(10)  NULL,
  `department` VARCHAR(20)  NULL,
  `province_code` varchar(10)  NULL,
  `province` VARCHAR(20)  NULL,
  `district_code` varchar(10) NULL,
  `district` VARCHAR(20) NULL,
  `is_verified` BOOLEAN NULL,
  `status` CHAR(1) NULL DEFAULT NULL,
  `username_create` VARCHAR(30) NULL,
  `date_create` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `date_update` DATETIME ON UPDATE CURRENT_TIMESTAMP,
  `username_update` VARCHAR(30) NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `fk_person_id_address`
    FOREIGN KEY (`person_id`)
    REFERENCES `dev_ebpm_flow`.`person` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `dev_ebpm_flow`.`marital_relationship`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dev_ebpm_flow`.`marital_relationship`;
CREATE TABLE IF NOT EXISTS `dev_ebpm_flow`.`marital_relationship` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `husband_id` INT(11) NOT NULL,
  `wife_id` INT(11) NOT NULL,
  `status` CHAR(1) NULL DEFAULT NULL,
  `username_create` VARCHAR(30) NULL,
  `date_create` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `date_update` DATETIME ON UPDATE CURRENT_TIMESTAMP,
  `username_update` VARCHAR(30) NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `fkey_husband_person`
    FOREIGN KEY (`husband_id`)
    REFERENCES `dev_ebpm_flow`.`person` (`id`)
    ON DELETE CASCADE,
  CONSTRAINT `fkey_wife_person`
    FOREIGN KEY (`wife_id`)
    REFERENCES `dev_ebpm_flow`.`person` (`id`)
    ON DELETE CASCADE);


-- -----------------------------------------------------
-- Table `dev_ebpm_flow`.`phone`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dev_ebpm_flow`.`phone`;
CREATE TABLE IF NOT EXISTS `dev_ebpm_flow`.`phone` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `person_id` INT(11) NOT NULL,
  `type` VARCHAR(15) NULL DEFAULT NULL,
  `phone_number` VARCHAR(30) NOT NULL,
  `annexed` VARCHAR(20) NOT NULL,
  `is_verified` BOOLEAN NOT NULL,
  `status` CHAR(1) NULL DEFAULT NULL,
  `username_create` VARCHAR(30) NULL,
  `date_create` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `date_update` DATETIME ON UPDATE CURRENT_TIMESTAMP,
  `username_update` VARCHAR(30) NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `fkey_phone_person`
    FOREIGN KEY (`person_id`)
    REFERENCES `dev_ebpm_flow`.`person` (`id`)
  ON DELETE CASCADE);


-- -----------------------------------------------------
-- Table `dev_ebpm_flow`.`email`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dev_ebpm_flow`.`email`;
CREATE TABLE IF NOT EXISTS `dev_ebpm_flow`.`email` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `person_id` INT(11) NOT NULL,
  `type` VARCHAR(15) NULL DEFAULT NULL,
  `value` VARCHAR(60) NOT NULL,
  `status` CHAR(1) NULL DEFAULT NULL,
  `username_create` VARCHAR(30) NULL,
  `date_create` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `date_update` DATETIME ON UPDATE CURRENT_TIMESTAMP,
  `username_update` VARCHAR(30) NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `fkey_person_id_email`
    FOREIGN KEY (`person_id`)
    REFERENCES `dev_ebpm_flow`.`person` (`id`)
  ON DELETE CASCADE);

-- -----------------------------------------------------
-- Table `dev_ebpm_flow`.`employment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dev_ebpm_flow`.`employment`;
CREATE TABLE IF NOT EXISTS `dev_ebpm_flow`.`employment` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `person_id` INT(11) NOT NULL,
  `ruc` CHAR(11) NOT NULL,
  `business_line_code` VARCHAR(10) NOT NULL,
  `business_line` VARCHAR(60) NOT NULL,
  `net_income` FLOAT NULL,
  `workplace` VARCHAR(60) NULL DEFAULT NULL,
  `profession` VARCHAR(35) NULL DEFAULT NULL,
  `job_title_code` VARCHAR(10) NOT NULL,
  `job_title` VARCHAR(60) NOT NULL,
  `admission_date` DATE NOT NULL,
  `status` CHAR(1) NULL DEFAULT NULL,
  `username_create` VARCHAR(30) NULL,
  `date_create` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `date_update` DATETIME ON UPDATE CURRENT_TIMESTAMP,
  `username_update` VARCHAR(30) NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `fkey_person_id_employment`
    FOREIGN KEY (`person_id`)
    REFERENCES `dev_ebpm_flow`.`person` (`id`)
  ON DELETE CASCADE);

